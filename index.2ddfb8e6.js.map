{"mappings":"AAAO,MAAMA,EAAO,CAClBC,QAASC,SAASC,cAAc,gBAChCC,QAASF,SAASC,cAAc,YAChCE,aAAcH,SAASC,cAAc,8BCHxB,SAAAG,EAAsBC,GACnC,OAAOA,EAAMC,KAAI,EAACC,aAACA,EAAYC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAC/C,yCACEJ,kJAKNC,kGAIAC,+FAIAC,sGAIAC,kCAIHC,KAAK,G,CCnB0C,MAA9CC,EAAiB,ICLR,MAMbC,WAAWC,GAKb,OAFIC,QAAQC,IAAIC,MAETC,MAAM,sEAAyDD,KAAKH,oBAAoBG,KAAKE,2DACjGC,MAAKC,GAAKA,EAAEC,SACZF,MAAK,EAACG,KAACA,MACNN,KAAKE,MAAQ,EAENI,I,CAITC,YACEP,KAAKE,KAAO,C,CAGVM,YACF,OAAOR,KAAKH,W,CAEVW,UAAMC,GACRT,KAAKH,YAAcY,C,CA3BpBC,cACCV,KAAKH,YAAc,GACnBG,KAAKE,KAAO,C,GD0BhB,SAASS,IAEPhB,EAAeC,aAAaO,MAAKhB,KAOnC,SAA2BA,GACzBP,EAAKI,QAAQ4B,mBAAmB,YAAa1B,EAAaC,G,CAPxD0B,CAAkB1B,EAAM,G,CArB5BP,EAAKC,QAAQiC,iBAAiB,UAGR,SAAJC,GAIhB,GAHAA,EAAEC,iBAEFrB,EAAea,MAAQO,EAAEE,cAAcC,SAASV,MAAMW,MACzB,KAAzBxB,EAAea,MACjB,OAAOY,MAAM,2BAIfzB,EAAeY,YAoBf3B,EAAKI,QAAQqC,UAAY,GAlBzBV,G,IAyBM,MAaFW,EAAW,IAAIC,sBAbJC,IACfA,EAAQC,SAAQC,IACVA,EAAMC,gBAA2C,KAAzBhC,EAAea,OACzCG,GAAY,GAEd,GAGY,CACdiB,WAAY,UAMRC,EAAW/C,SAASC,cAAc,aACduC,EAAjBQ,QAAQD","sources":["src/js/refs.js","src/js/createMarkup.js","src/index.js","src/js/apiService.js"],"sourcesContent":["export const refs = {\n  formRef: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  morePhotoBtn: document.querySelector('[data-action=\"load-more\"]'),\n}","export default function createMarkup(cards) {\n  return cards.map(({webformatURL, likes, views, comments, downloads}) => {\n    return  `<div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"\" width=\"440\" height=\"300\"/>\n\n  <div class=\"stats\">\n    <p class=\"stats-item\">\n      <i class=\"material-icons\">thumb_up</i>\n      ${likes}\n    </p>\n    <p class=\"stats-item\">\n      <i class=\"material-icons\">visibility</i>\n      ${views}\n    </p>\n    <p class=\"stats-item\">\n      <i class=\"material-icons\">comment</i>\n      ${comments}\n    </p>\n    <p class=\"stats-item\">\n      <i class=\"material-icons\">cloud_download</i>\n      ${downloads}\n    </p>\n  </div>\n</div>`\n  }).join('')\n};","import PixabayService from './js/apiService';\nimport { refs } from './js/refs';\nimport createMarkup from './js/createMarkup';\n// import LoadMoreBtn from './js/loadMore-btn';//виключаємо клас для роботи з кнопкою load more i будемо використовувати infiniti scroll\n\nconst pixabayService = new PixabayService();\n// const loadMoreBtn = new LoadMoreBtn({\n//   selector: '[data-action=\"load-more\"]',\n//   hidden: true\n// });\n\nrefs.formRef.addEventListener('submit', onSearch);//слухаємо submit на формі\n// refs.morePhotoBtn.addEventListener('click', fetchPhoto)//кнопка load more більше не потрібна\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  pixabayService.query = e.currentTarget.elements.query.value;\n  if (pixabayService.query === '') {\n    return alert('Введіть параметр пошуку')\n  }\n\n  // loadMoreBtn.show();\n  pixabayService.resetPage();\n  clearPhotoContainer();\n  fetchPhoto();\n}\n\n\nfunction fetchPhoto() {\n  // loadMoreBtn.disable();\n  pixabayService.fetchPhoto().then(cards => {\n    appendCardsMarkup(cards);\n    // loadMoreBtn.enable();\n    \n})\n};\n\nfunction appendCardsMarkup(cards) {//ф-ція розмітки\n  refs.gallery.insertAdjacentHTML('beforeend', createMarkup(cards))\n};\n\nfunction clearPhotoContainer() {//ф-ція очищення розмітки при кожному сабміті\n  refs.gallery.innerHTML = '';\n}\n\n\n\n\n//8️⃣INFINITY SCROLL8️⃣ - INTESECTION OBSERVER/////////////////\nconst callback = entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting && pixabayService.query !== '') {//в-сть isIntersecting вказує чи пересікає елемент target зараз viewport і перевіряємо чи строка запиту не порожня, якщо порожня то перший раз ігноруємо пересікання target\n      fetchPhoto();\n    }\n  })\n}\n\nconst options = {\n  rootMargin: '150px',//в-сть яка оприділяє коли має спрацювати колбек (за 100рх до того як target відобразиться у viewport)\n  // threshold: 0.5,//в-сть яка оприділяє коли має спрацювати колбек (0.5 це коли 50% буде видно у viewport)\n}\n\nconst observer = new IntersectionObserver(callback, options);//ств. новий екземпляр і передаємо туди callback i options\n\nconst sentinel = document.querySelector('#sentinel')//елемент target за яким будемо стежити\nobserver.observe(sentinel);//вказуємо за яким елементом стежити\n","export default class PixabayService {\n   constructor() {\n    this.searchQuery = '';//сюди записуємо введені дані в інпут (дані записуються в файлі індекс.js)\n    this.page = 1;//поточна сторінка пагінації .. номер групи\n  }\n\n  fetchPhoto(searchQuery) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '26979018-8f50a5ae15f0c572be2195341';\n    console.log(this);\n\nreturn fetch(`${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`)\n  .then(r => r.json())\n  .then(({hits}) => {\n    this.page += 1//збільшуємо сторінку на 1 кожного разу при fetchі\n\n    return hits//повертаємо масив об'єктів\n  })\n  }\n\n  resetPage() {\n    this.page = 1//скидуємо поточну сторінку на одиницю кожного разу при сабміті\n  }\n\n  get query() { //робимо гетер і сетер щоб в зовнішньому коді мати доступ до змінної searchQuery де ми зберігаємо введені дані в input\n    return this.searchQuery\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery\n  }\n}\n\n"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","formRef","document","querySelector","gallery","morePhotoBtn","$bb2db7a89a40ba72$export$2e2bcd8739ae039","cards","map","webformatURL","likes","views","comments","downloads","join","$1f0dc3b9307be026$var$pixabayService","fetchPhoto","searchQuery","console","log","this","fetch","page","then","r","json","hits","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$fetchPhoto","insertAdjacentHTML","$1f0dc3b9307be026$var$appendCardsMarkup","addEventListener","e","preventDefault","currentTarget","elements","value","alert","innerHTML","$1f0dc3b9307be026$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","rootMargin","$1f0dc3b9307be026$var$sentinel","observe"],"version":3,"file":"index.2ddfb8e6.js.map"}